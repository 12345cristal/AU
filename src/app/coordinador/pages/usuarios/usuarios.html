<div class="usuarios-container">
  <h1>Usuarios</h1>
  <p>Gestión de usuarios y equipo terapéutico</p>

  <div class="acciones">
    <input type="text" [(ngModel)]="searchQuery" placeholder="Buscar usuarios por nombre, email o especialidad..." />
    <button (click)="agregarUsuario()">Nuevo Usuario</button>
    <button (click)="verEquipoCompleto()">Equipo Completo</button>
    <button (click)="mostrarActivos = true">Activos</button>
    <button (click)="mostrarActivos = false">Dados de baja</button>
  </div>

  <div *ngIf="cargando">Cargando usuarios...</div>

  <table class="tabla-usuarios" *ngIf="!cargando && filteredUsuarios.length">
    <thead>
      <tr>
        <th>Usuario</th>
        <th>Rol</th>
        <th>Especialidad</th>
        <th>Contacto</th>
        <th>Último Acceso</th>
        <th>Estado</th>
        <th>Acciones</th>
      </tr>
    </thead>
    <tbody>
      <tr *ngFor="let u of filteredUsuarios">
        <td>{{ u.iniciales }} - {{ u.nombre }}</td>
        <td>{{ u.rol }}</td>
        <td>{{ u.especialidad || '-' }}</td>
        <td>{{ u.contacto }}</td>
        <td>{{ u.ultimoAcceso }}</td>
        <td>{{ u.activo ? 'Activo' : 'Inactivo' }}</td>
        <td>
          <button (click)="toggleActivo(u)">{{ u.activo ? 'Dar de baja' : 'Activar' }}</button>
          <button>Editar</button>
          <button>Permisos</button>
        </td>
      </tr>
    </tbody>
  </table>

  <div *ngIf="!cargando && filteredUsuarios.length === 0">
    No se encontraron usuarios.
  </div>
</div>
